'use strict'

/**
 * @module      code
 * @since       0.0.1
 * @desc        모듈에서 사용하는 코드 데이터
*/

const path = require('path'),
    utils = require('@amuzlab/utils'),
    fsPromise = require('@amuzlab/fs-promise');

// init
(() => {
    utils.go(
        __dirname,
        dirPath => fsPromise.fs.readdirSync(dirPath),
        utils.filter(
            fileName => /\.json/i.test(path.extname(fileName)),
            fileName => {
                const dirPath = path.join(__dirname, fileName),
                    attrName = path.basename(fileName, path.extname(fileName)),
                    data = JSON.parse(fsPromise.fs.readFileSync(dirPath))

                Object.defineProperty(
                    exports,
                    attrName.toUpperCase(),
                    {
                        enumerable: true,
                        value: data
                    })
        }))
})();

Object.defineProperties(
    exports,
    {
        /**
         * @name        isCodeValue
         * @desc        전달된 값이 정의된 코드값과 맞는지에 대한 결과 리턴
         * @param       {any}       codeValue   code 값과 맞는지를 판단할 데이터
         * @param       {String}    code        정의된 code 값
         * @returns     {Boolean}   전달된 값이 정의된 코드값과 맞는지에 대한 결과
         * @static
         * @public
         * @function
         * @since       0.0.1
        */
        isCodeValue: {
            enumerable: true,
            value: (codeValue, code) => new RegExp(`^${code}$`, 'i').test(codeValue)
        }
    })
