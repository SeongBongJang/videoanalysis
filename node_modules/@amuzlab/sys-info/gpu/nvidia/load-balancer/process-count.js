'use strict'

/**
 * @module      gpu/nvidia/load-balancer/round-robin
 * @desc        GPU Load balancing 모듈<br/>
 *              호출 되는 시점에 할당된 프로세스 개수가 가장 적은 GPU 리턴
 * @since       1.0.0
 * @date        2020-01-16
*/
Object.defineProperties(
    exports,
    {
        /**
         * @name        getGPU
         * @desc        호출 되는 시점에 할당된 프로세스 개수가 가장 적은 GPU 리턴
         * @function
         * @static
         * @public
         * @param       {Array}     gpus    - host에 설치된 gpu 리스트
         * @returns     {Object}    gpu     - 할당된 프로세스 개수가 가장 적은 GPU 정보
         * @since       1.0.0
         * @date        2020-01-20
        */
        getGPU: {
            enumerable: true,
            value: gpus => {
                return gpus.reduce(
                    (gpu, _gpu) => {
                        return _gpu.processes.length < gpu.processes.length ? _gpu : gpu
                    },
                    gpus[0])
            }
        }
    })
